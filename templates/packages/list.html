{% extends 'base.html' %}

{% block content %}
<div class="container" style="margin-top: 2rem;">
    <h1 class="section-title">Our Packages</h1>
    <div class="grid" style="grid-template-columns: 1fr 3fr;">
        <!-- Sidebar Filters -->
        <aside>
            <div class="card" style="padding: 1.5rem;">
                <h3>Filter By</h3>
                <form method="get">
                    <div style="margin-bottom: 1rem;">
                        <label>Destination</label>
                        <select name="destination" style="width: 100%; padding: 0.5rem;">
                            <option value="">All Destinations</option>
                            {% for dest in destinations %}
                            <option value="{{ dest.id }}">{{ dest.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label>Category</label>
                        <select name="category" style="width: 100%; padding: 0.5rem;">
                            <option value="">All Categories</option>
                            {% for cat in categories %}
                            <option value="{{ cat.id }}">{{ cat.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Filter</button>
                </form>
            </div>
        </aside>

        <!-- Package Grid -->
        <div class="grid">
            {% for package in packages %}
            <div class="card">
                {% if package.images.first %}
                <img src="{{ package.images.first.image.url }}" alt="{{ package.title }}">
                {% else %}
                <img src="https://via.placeholder.com/400x200" alt="{{ package.title }}">
                {% endif %}
                <div class="card-content">
                    <h3 class="card-title">{{ package.title }}</h3>
                    <p>{{ package.duration_days }} Days</p>
                    <span class="card-price">From KES {{ package.price }}</span>
                    <a href="{% url 'package_detail' package.slug %}" class="btn btn-primary"
                        style="display: block; text-align: center; margin-top: 1rem;">View Details</a>
                </div>
            </div>
            {% empty %}
            <p>No packages found matching your criteria.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}