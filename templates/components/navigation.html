{% load static %}
<nav class="nav-fixed">
    <div class="nav-container">
        <div class="nav-content">
            <!-- Logo -->
            <div class="logo-wrapper">
                <a href="{% url 'home' %}" class="logo-link">
                    <img src="{% static 'images/logo.jpg' %}" alt="Grandmaster Travel Agency" class="nav-logo">
                    <span class="logo-text">GRANDMASTER TRAVEL AGENCY</span>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="nav-links-desktop">
                <nav>
                    <ul>

                        <li class="nav-item">
                            <a href="{% url 'safari_packages' %}" class="nav-link">Safaris</a>
                        </li>
                        {% for link in nav_links %}
                        <li class="nav-item {% if link.dropdown %}has-dropdown{% endif %}">
                            <a href="{{ link.href }}" class="nav-link">
                                {{ link.name }}
                                {% if link.dropdown %}
                                <i data-lucide="chevron-down" class="dropdown-icon"></i>
                                {% endif %}
                            </a>
                            {% if link.dropdown %}
                            <div class="dropdown-menu">
                                <div class="dropdown-bg-animation"></div>
                                <ul class="dropdown-list">
                                    {% for item in link.dropdown %}
                                    <li><a href="{{ item.href }}" class="dropdown-link">{{ item.name }}</a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        </li>
                        {% endfor %}

                        <!-- Auth Links -->
                        {% if user.is_authenticated %}
                        <li class="nav-item has-dropdown" style="margin-left: auto;">
                            <a href="#" class="nav-link text-gold font-semibold">
                                <i data-lucide="user" class="icon-sm me-1"></i> Account
                                <i data-lucide="chevron-down" class="dropdown-icon"></i>
                            </a>
                            <div class="dropdown-menu">
                                <div class="dropdown-bg-animation"></div>
                                <ul class="dropdown-list">
                                    <li><a href="{% url 'dashboard' %}" class="dropdown-link">My Dashboard</a></li>
                                    {% if user.is_staff %}
                                    <li><a href="{% url 'staff_dashboard' %}" class="dropdown-link text-warning">Staff
                                            Dashboard</a></li>
                                    {% endif %}
                                    <li>
                                        <form action="{% url 'logout' %}" method="post" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="dropdown-link"
                                                style="background: none; border: none; width: 100%; text-align: left; cursor: pointer;">Logout</button>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        {% else %}
                        <li class="nav-item" style="margin-left: auto;">
                            <a href="{% url 'login' %}" class="btn-primary btn-sm" style="margin-left: 1rem;">Login</a>
                        </li>
                        {% endif %}
                    </ul>
                </nav>
            </div>

            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i data-lucide="menu" class="menu-icon"></i>
                <i data-lucide="x" class="close-icon hidden"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">

        <div class="mobile-nav-item">
            <div class="mobile-nav-header">
                <a href="{% url 'safari_packages' %}" class="mobile-nav-link">Safaris</a>
            </div>
        </div>
        {% for link in nav_links %}
        <div class="mobile-nav-item">
            <div class="mobile-nav-header">
                <a href="{{ link.href }}" class="mobile-nav-link">{{ link.name }}</a>
                {% if link.dropdown %}
                <button class="mobile-dropdown-toggle">
                    <i data-lucide="chevron-down"></i>
                </button>
                {% endif %}
            </div>
            {% if link.dropdown %}
            <div class="mobile-dropdown-menu hidden">
                {% for item in link.dropdown %}
                <a href="{{ item.href }}" class="mobile-dropdown-link">{{ item.name }}</a>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}

        <!-- Mobile Auth -->
        {% if user.is_authenticated %}
        <div class="mobile-nav-item">
            <div class="mobile-nav-header">
                <a href="{% url 'dashboard' %}" class="mobile-nav-link">My Dashboard</a>
            </div>
        </div>
        {% if user.is_staff %}
        <div class="mobile-nav-item">
            <div class="mobile-nav-header">
                <a href="{% url 'staff_dashboard' %}" class="mobile-nav-link text-warning">Staff Dashboard</a>
            </div>
        </div>
        {% endif %}
        <div class="mobile-nav-item">
            <div class="mobile-nav-header">
                <form action="{% url 'logout' %}" method="post" class="w-full">
                    {% csrf_token %}
                    <button type="submit" class="mobile-nav-link w-full text-left"
                        style="background: none; border: none; padding: 1rem 1.5rem; color: var(--primary-color);">Logout</button>
                </form>
            </div>
        </div>
        {% else %}
        <div class="mobile-nav-item">
            <div class="mobile-nav-header">
                <a href="{% url 'login' %}" class="mobile-nav-link" style="color: var(--secondary-color);">Login / Sign
                    Up</a>
            </div>
        </div>
        {% endif %}
    </div>
</nav>